---
title: Getting Started
description: Complete guide to integrate OneKey hardware wallet via USB/BLE
---

# Getting Started

This guide covers the complete flow for integrating OneKey hardware wallet: install the SDK, initialize, discover devices, handle UI prompts, and make your first signing call.

## Install

```bash
npm i @onekeyfe/hd-common-connect-sdk @onekeyfe/hd-shared @onekeyfe/hd-core
```

## Initialize the SDK

Initialize as early as possible so device events and UI prompts are handled correctly.

```ts
import HardwareSDK from '@onekeyfe/hd-common-connect-sdk';

await HardwareSDK.init({
  env: 'webusb',  // 'webusb' | 'lowlevel' | 'react-native'
  debug: process.env.NODE_ENV !== 'production',
  fetchConfig: true,
});
```

| Environment | Use Case |
|-------------|----------|
| `webusb` | Browser with WebUSB |
| `lowlevel` | Native apps (iOS/Android/Flutter) via low-level adapter |
| `react-native` | React Native with BLE transport |

## Bind Events

Set up event listeners for device connection and UI prompts:

```ts
import { UI_EVENT, UI_REQUEST, DEVICE } from '@onekeyfe/hd-core';

HardwareSDK.on(UI_EVENT, async (message) => {
  switch (message.type) {
    case UI_REQUEST.REQUEST_PIN:
      // Handle PIN entry (see below)
      break;
    case UI_REQUEST.REQUEST_PASSPHRASE:
      // Handle passphrase entry (see below)
      break;
  }
});

HardwareSDK.on(DEVICE.CONNECT, (payload) => console.log('Connected:', payload));
HardwareSDK.on(DEVICE.DISCONNECT, (payload) => console.log('Disconnected:', payload));
```

## Discover Devices

### WebUSB Authorization (Browser)

```ts
import { ONEKEY_WEBUSB_FILTER } from '@onekeyfe/hd-shared';

// Trigger browser's device chooser
await navigator.usb.requestDevice({ filters: ONEKEY_WEBUSB_FILTER });
```

### Search Devices

```ts
const result = await HardwareSDK.searchDevices();
if (!result.success) throw new Error(result.payload.error);

const devices = result.payload;
// [{ connectId, deviceId?, name, deviceType, ... }]
```

### Get Device Features

Resolve `device_id` from `connectId` (required for BLE connections):

```ts
const features = await HardwareSDK.getFeatures(connectId);
if (!features.success) throw new Error(features.payload.error);

const deviceId = features.payload.device_id;
```

> **Important:** Persist both `connectId` and `device_id` for subsequent API calls.

## Handle PIN Entry

When a protected call is made and the device is locked, handle `REQUEST_PIN`:

```ts
import { UI_RESPONSE } from '@onekeyfe/hd-core';

// Option 1: Enter on device (recommended)
await HardwareSDK.uiResponse({
  type: UI_RESPONSE.RECEIVE_PIN,
  payload: '@@ONEKEY_INPUT_PIN_IN_DEVICE'
});

// Option 2: Software blind PIN (not supported on Pro/Touch)
await HardwareSDK.uiResponse({
  type: UI_RESPONSE.RECEIVE_PIN,
  payload: userInputPin  // e.g., '1234'
});
```

> **Note:** OneKey Pro and Touch devices only support on-device PIN entry.

## Handle Passphrase

For hidden wallet access, handle `REQUEST_PASSPHRASE`:

```ts
// Option 1: Enter on device (most secure)
await HardwareSDK.uiResponse({
  type: UI_RESPONSE.RECEIVE_PASSPHRASE,
  payload: { passphraseOnDevice: true, value: '' }
});

// Option 2: Software input with optional session cache
await HardwareSDK.uiResponse({
  type: UI_RESPONSE.RECEIVE_PASSPHRASE,
  payload: { value: userPassphrase, passphraseOnDevice: false, save: true }
});
```

To force standard wallet (skip passphrase), add `useEmptyPassphrase: true` to any method call.

## First Signing Call

Example: Sign an EVM message (EIP-191 personal_sign):

```ts
const message = 'Hello OneKey';
const messageHex = Buffer.from(message).toString('hex');

const res = await HardwareSDK.evmSignMessage(connectId, deviceId, {
  path: "m/44'/60'/0'",
  messageHex,
  chainId: 1,
});

if (!res.success) throw new Error(res.payload.error);

console.log('Address:', res.payload.address);
console.log('Signature:', res.payload.signature);
```

## Next Steps

- **Transport Setup:** [WebUSB](/en/hardware-sdk/transport/web-usb) | [React Native BLE](/en/hardware-sdk/transport/react-native-ble) | [Native BLE](/en/hardware-sdk/transport/android)
- **Chain APIs:** Use the chain selector in the sidebar to find specific signing methods
- **Reference:** [Common Params](/en/hardware-sdk/core-api-guide#common-params) | [Error Codes](/en/hardware-sdk/core-api-guide#error-codes)
