---
title: Solana Signer
---

# Solana Signer

End-to-end guide for Solana: overview → how it works → install/init → use case index → parameters/limits → device display & verification → observable behavior → example.

## Overview

- Supports: `solGetAddress`, `solSignTransaction` (serialized message/tx signing).
- Path: hardened, length 4 (`m/44'/501'/account'/0'`, e.g., `m/44'/501'/0'/0'`).
- You must serialize the Solana message/transaction to `rawTx` (base64/hex).

## How it works

- `HardwareSDK` talks to the device; device shows source/destination, amount, fee summary, then confirms; returns signature.
- Host verifies by parsing `rawTx` with `@solana/web3.js`, attaching the signature, and checking against the public key from `solGetAddress`.

## Install & init

```bash
npm i @onekeyfe/hd-common-connect-sdk @onekeyfe/hd-core @onekeyfe/hd-shared
```

```ts
import HardwareSDK from '@onekeyfe/hd-common-connect-sdk';
await HardwareSDK.init({ env: 'webusb', fetchConfig: true, debug: false });
const [{ connectId }] = await HardwareSDK.searchDevices();
const deviceId = (await HardwareSDK.getFeatures(connectId)).payload?.device_id;
```

## Use cases (index)

- Get Address → `solGetAddress`
|- Sign Transaction/Message → `solSignTransaction`

## Parameters & limits

| Field | Notes |
| --- | --- |
| `path` | Hardened, length 4 (`44'/501'/account'/0'`) |
| `rawTx` | Serialized message/transaction, base64 or hex |
| `keepSession?` | Optional; reuse session for multiple signatures |

- Limits: very large messages or unsupported instructions may be rejected; recent blockhash must be fresh.

## Device display & host verification

- Device: path/account, destinations, amount, fee summary; blockhash implicit.
- Host: parse `rawTx` with `@solana/web3.js`, attach signature, verify against `solGetAddress` public key.

## Observable behavior

- Events: subscribe `UI_EVENT`; expect PIN/Passphrase/confirm prompts.
- Status: not started → pending (awaiting confirm) → completed/cancelled/error; pending state should allow cancel/retry.
- Concurrency: serial per device.

## Supported operations & limits

- Signs serialized Solana transactions/messages supplied as `rawTx` (base64/hex).
- Path must be hardened, length 4: `m/44'/501'/account'/0'`.
- Very large messages or unsupported instruction sets may be rejected; ensure recent blockhash is fresh.

## Parameters & constraints

| Field | Notes |
| --- | --- |
| `path` | Hardened, length 4 (`44'/501'/account'/0'`) |
| `rawTx` | Serialized message/transaction, base64 or hex |
| `keepSession?` | Optional; reuse session for multiple signatures |

## Device display & host verification

- Device shows: source path/account, destinations, amount, fee summary; blockhash is implicit.
- Host verification: use `@solana/web3.js` to parse `rawTx`, attach the returned signature, and verify against the public key from `solGetAddress`.

## Example

```ts
import HardwareSDK from '@onekeyfe/hd-common-connect-sdk';

await HardwareSDK.init({ env: 'webusb', debug: false });

const [{ connectId }] = await HardwareSDK.searchDevices();
const deviceId = (await HardwareSDK.getFeatures(connectId)).payload?.device_id;

const path = "m/44'/501'/0'/0'";
await HardwareSDK.solGetAddress(connectId, deviceId, { path, showOnOneKey: true });

const rawTx =
  '4301355cc18d85809872bcbd63cb6ea5ac3c2814a1bacf2e50d8ec62367211917b79ecd1f1a98fa0d793d7cb92ebd9a479dc6aba0ae8570253aa87c0da32db5ed2bd401f3bbee52c2bc55761fd8486fae2e28f46499282f4267b8b90fc8c1cc97bb659b6cc927f2ec1701ef2928ddb84759ba5c557f549db';

const { success, payload } = await HardwareSDK.solSignTransaction(connectId, deviceId, {
  path,
  rawTx,
  keepSession: true,
});

if (success) {
  console.info('signature:', payload.signature);
}
```

## Sample test vector (shape)

- Transfer: path `m/44'/501'/0'/0'`, `rawTx` = simple transfer (from sender to recipient, lamports, recent blockhash). Expect returned signature to verify for the sender address when attached to the transaction.
> Signatures depend on device keys; use this as a field/flow reference.

## Validation & troubleshooting

- Path must follow `44'/501'/account'/0'`; others are rejected.
- `rawTx` must include fresh blockhash, correct accounts, instruction order.
- Serial per device; use `keepSession` for multiple signatures.
- Rejection/timeout: provide cancel/retry; no auto-replay.

See method doc: [solSignTransaction](/en/hardware-sdk/chains/solana/solsigntransaction).
