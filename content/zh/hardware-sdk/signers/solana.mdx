---
title: Solana Signer
---

# Solana Signer

Solana ç¡¬ä»¶ç­¾åå…¨é“¾è·¯æŒ‡å—ï¼ˆOneKey ç‰ˆï¼‰ï¼Œè¦†ç›–åœ°å€ç¡®è®¤ä¸äº¤æ˜“/æ¶ˆæ¯ç­¾åï¼Œå¼ºè°ƒå›ºå®šç¡¬åŒ–è·¯å¾„ã€åºåˆ—åŒ–æ¶ˆæ¯ç­¾åä¸è®¾å¤‡å¯éªŒè¯ã€‚  
Solana hardware signing guide (OneKey), covering address confirmation and message/transaction signing with fixed hardened path and serialized rawTx review.

## ğŸ”¹ Index / ç›®å½•

1. [How it works / å·¥ä½œåŸç†](#-how-it-works--å·¥ä½œåŸç†)
2. [Installation / å®‰è£…](#-installation--å®‰è£…)
3. [Initialisation / åˆå§‹åŒ–](#-initialisation--åˆå§‹åŒ–)
4. [Use Cases / ç”¨ä¾‹](#-use-cases--ç”¨ä¾‹)
   - [Get Address](#use-case-1-get-address)
   - [Sign Transaction](#use-case-2-sign-transaction)
5. [äº¤äº’ä¸çŠ¶æ€](#-äº¤äº’ä¸çŠ¶æ€)
6. [Example / ç¤ºä¾‹](#-example--ç¤ºä¾‹)
7. [Validation & Troubleshooting / éªŒç­¾ä¸æ’éšœ](#-validation--troubleshooting--éªŒç­¾ä¸æ’éšœ)

## ğŸ”¹ How it works / å·¥ä½œåŸç†

OneKey Solana signer uses `HardwareSDK` to talk to the device app, displaying source/destination, amount, fee summary for a serialized `rawTx` (base64/hex). After confirmation the signature is returned; host attaches it via `@solana/web3.js` and verifies against the public key.  
é€šè¿‡ `HardwareSDK` ä¸è®¾å¤‡ç«¯äº¤äº’ï¼Œä½¿ç”¨åºåˆ—åŒ–çš„ `rawTx`ï¼ˆbase64/hexï¼‰åœ¨è®¾å¤‡å±•ç¤ºæº/ç›®çš„ã€é‡‘é¢ä¸è´¹ç”¨æ‘˜è¦ï¼Œç¡®è®¤åè¿”å›ç­¾åï¼Œä¸»æœºç”¨ `@solana/web3.js` é™„åŠ å¹¶éªŒç­¾ã€‚

å…³é”®ç‚¹ï¼š

- è·¯å¾„å›ºå®šä¸ºå…¨ç¡¬åŒ–ã€é•¿åº¦ 4ï¼š`m/44'/501'/account'/0'`ï¼ˆå¦‚ `m/44'/501'/0'/0'`ï¼‰ã€‚
- éœ€è¦ä¸»æœºä¾§è‡ªè¡Œæ„é€ å¹¶åºåˆ—åŒ–æ¶ˆæ¯/äº¤æ˜“ï¼ˆå« recent blockhashï¼‰ã€‚

## ğŸ”¹ Installation / å®‰è£…

```bash
npm i @onekeyfe/hd-core @onekeyfe/hd-common-connect-sdk
```

## ğŸ”¹ Initialisation / åˆå§‹åŒ–

```ts
import HardwareSDK from '@onekeyfe/hd-common-connect-sdk';
await HardwareSDK.init({ env: 'webusb', fetchConfig: true, debug: false });
const [{ connectId }] = await HardwareSDK.searchDevices();
const deviceId = (await HardwareSDK.getFeatures(connectId)).payload?.device_id;
```

## ğŸ”¹ Use Cases / ç”¨ä¾‹

### Use Case 1: Get Address

```ts
const path = "m/44'/501'/0'/0'";
const res = await HardwareSDK.solGetAddress(connectId, deviceId, {
  path,
  showOnOneKey: true,
});
// res.payload.address, publicKey?, path
```

**Parameters / å‚æ•°**

- `path`: å¿…å¡«ï¼Œå¿…é¡»æ»¡è¶³ `44'/501'/account'/0'` çš„å…¨ç¡¬åŒ–ç»“æ„ã€‚
- `showOnOneKey?`: å¯é€‰ï¼Œæ˜¯å¦åœ¨è®¾å¤‡ä¸Šå±•ç¤ºå¹¶ç¡®è®¤ã€‚

**Returns / è¿”å›**

`Promise<{ success, payload: { address, path, publicKey? } }>`

---

### Use Case 2: Sign Transaction

```ts
const res = await HardwareSDK.solSignTransaction(connectId, deviceId, {
  path: "m/44'/501'/0'/0'",
  rawTx,
  keepSession: true,
});
// res.payload.signature
```

**Parameters / å‚æ•°**

- `path`: å¿…å¡«ï¼ŒåŒä¸Šã€‚
- `rawTx`: å¿…å¡«ï¼Œåºåˆ—åŒ–æ¶ˆæ¯/äº¤æ˜“ï¼ˆbase64 æˆ– hexï¼‰ã€‚
- `keepSession?`: å¯é€‰ï¼Œå¤šæ¬¡ç­¾åå¤ç”¨ä¼šè¯ã€‚

**Returns / è¿”å›**

`Promise<{ success, payload: { signature } }>`ï¼Œå¯é™„åŠ åˆ° `Transaction` åå¹¿æ’­ã€‚

## ğŸ”¹ äº¤äº’ä¸çŠ¶æ€

- æ¥å£ä»¥ Promise ç»“æŸï¼›ç”¨æˆ·æç¤ºé€šè¿‡ `UI_REQUEST` äº‹ä»¶è§¦å‘ï¼ˆè§£é”è®¾å¤‡ã€æ‰“å¼€ Solana Appã€ç¡®è®¤äº¤æ˜“ï¼‰ã€‚
- åŒä¸€è®¾å¤‡ä¸²è¡Œè°ƒç”¨ï¼›å¤šæ¬¡ç­¾åå¯ç”¨ `keepSession` å‡å°‘é‡å¤æç¤ºã€‚

## ğŸ”¹ Example / ç¤ºä¾‹

```ts
import HardwareSDK from '@onekeyfe/hd-common-connect-sdk';

await HardwareSDK.init({ env: 'webusb', debug: false });

const [{ connectId }] = await HardwareSDK.searchDevices();
const deviceId = (await HardwareSDK.getFeatures(connectId)).payload?.device_id;

const path = "m/44'/501'/0'/0'";
await HardwareSDK.solGetAddress(connectId, deviceId, { path, showOnOneKey: true });

const rawTx =
  '4301355cc18d85809872bcbd63cb6ea5ac3c2814a1bacf2e50d8ec62367211917b79ecd1f1a98fa0d793d7cb92ebd9a479dc6aba0ae8570253aa87c0da32db5ed2bd401f3bbee52c2bc55761fd8486fae2e28f46499282f4267b8b90fc8c1cc97bb659b6cc927f2ec1701ef2928ddb84759ba5c557f549db';

const { success, payload } = await HardwareSDK.solSignTransaction(connectId, deviceId, {
  path,
  rawTx,
  keepSession: true,
});

if (success) {
  console.info('signature:', payload.signature);
}
```

## ğŸ”¹ Validation & Troubleshooting / éªŒç­¾ä¸æ’éšœ

- è·¯å¾„ï¼šå¿…é¡»éµå¾ª `44'/501'/account'/0'` å…¨ç¡¬åŒ–ï¼›å…¶ä»–è·¯å¾„ä¼šè¢«æ‹’ã€‚
- æ¶ˆæ¯/äº¤æ˜“ï¼šç¡®ä¿åŒ…å«æœ€æ–° `recentBlockhash`ã€æ­£ç¡®çš„è´¦æˆ·åˆ—è¡¨å’ŒæŒ‡ä»¤é¡ºåºã€‚
- è®¾å¤‡æ ¸å¯¹ï¼šè·¯å¾„/è´¦æˆ·ã€å…¬é“¾å¸é‡‘é¢ã€ç›®æ ‡è´¦æˆ·ã€è´¹ç”¨æ‘˜è¦éœ€ä¸å‰ç«¯ä¸€è‡´ã€‚
- éªŒç­¾ï¼šç”¨ `@solana/web3.js` å°†ç­¾åé™„åŠ åˆ° `Transaction`ï¼ŒéªŒè¯ç­¾åå…¬é’¥ç­‰äº `solGetAddress` è¿”å›å€¼ã€‚
- å¸¸è§é—®é¢˜ï¼š
  - è¶…å¤§æ¶ˆæ¯æˆ–ä¸æ”¯æŒçš„æŒ‡ä»¤ï¼šç²¾ç®€æŒ‡ä»¤æˆ–æ‹†åˆ†äº¤æ˜“ã€‚
  - ä¼šè¯äº¤äº’ï¼šåŒä¸€è®¾å¤‡ä¸²è¡Œè°ƒç”¨ï¼Œå¤šæ¬¡ç­¾åå¯å¯ç”¨ `keepSession`ã€‚
  - æ‹’ç­¾/è¶…æ—¶ï¼šæä¾›é‡è¯•/å–æ¶ˆï¼Œä¸è¦è‡ªåŠ¨é‡æ’­ã€‚

å‚è§æ–¹æ³•æ–‡æ¡£ï¼š[solSignTransaction](/zh/hardware-sdk/chains/solana/solsigntransaction)ã€‚
