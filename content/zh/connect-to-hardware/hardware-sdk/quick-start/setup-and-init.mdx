---
title: 设置与初始化
---

# 设置与初始化

本页面介绍如何安装 SDK 并尽早完成初始化，以便正确处理设备事件和 UI 提示（PIN/Passphrase）。

## 安装

```bash
npm i @onekeyfe/hd-common-connect-sdk @onekeyfe/hd-shared @onekeyfe/hd-core
```

## 初始化 SDK

```ts
import HardwareSDK from '@onekeyfe/hd-common-connect-sdk';

export async function initSdk(env: 'webusb' | 'lowlevel' | 'react-native' = 'webusb') {
  await HardwareSDK.init({
    env,
    debug: process.env.NODE_ENV !== 'production',
    fetchConfig: true,
  });
}
```

- `env: 'webusb'` → 浏览器 WebUSB
- `env: 'lowlevel'` → 原生外壳（iOS/Android/Flutter），通过底层适配器包
- `env: 'react-native'` → React Native，使用纯 BLE 传输

## 尽早绑定事件

- 更多信息：[事件配置](../api-reference/config-event)

```ts
import { UI_EVENT, UI_REQUEST, UI_RESPONSE, DEVICE } from '@onekeyfe/hd-core';

export function bindEvents() {
  HardwareSDK.on(UI_EVENT, async (message: any) => {
    switch (message.type) {
      case UI_REQUEST.REQUEST_PIN:
        // 查看专门的 PIN 页面获取最小对话框代码
        break;
      case UI_REQUEST.REQUEST_PASSPHRASE:
        // 查看专门的 Passphrase 页面获取最小对话框代码
        break;
      default:
        break;
    }
  });

  HardwareSDK.on(DEVICE.CONNECT, (payload: any) => {
    console.log('设备已连接:', payload);
  });
  HardwareSDK.on(DEVICE.DISCONNECT, (payload: any) => {
    console.log('设备已断开:', payload);
  });
}
```

继续前往设备发现页面，获取后续 API 调用所需的 `connectId` 和 `device_id`。
