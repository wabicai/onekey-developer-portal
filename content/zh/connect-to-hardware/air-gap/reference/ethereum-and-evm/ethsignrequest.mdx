---
title: EthSignRequest
---

# EthSignRequest

`EthSignRequest` 类处理以太坊签名请求。

用于向设备发送签名请求。



```
enum DataType {
    transaction = 1, // 用于旧版交易，未签名数据的 RLP 编码。
    typedData = 2, // 用于 EIP-712 类型化数据。JSON 字符串的字节。
    personalMessage = 3, // 用于个人消息签名。
    typedTransaction = 4 // 用于类型化交易，如 EIP-1559 交易。
}
```

### 参数

* `requestId`：`Buffer` 请求 ID。uuid 随机
* `signData`：`Buffer` 要签名的数据。
* `dataType`：`DataType` 签名数据类型。
* `chainId`：`number` 链 ID。可选
* `derivationPath`：[`CryptoKeypath`](../basic-api/cryptokeypath) 派生路径。
* `address`：`Buffer` 请求此签名的地址。可选
* `origin`：`string` 请求来源。可选



### URL 示例

```
UR:ETH-SIGN-REQUEST/ONADTPDAGDSWNNYAHGTOKPFPIAPANNROLNSAVYDTHHAOHDECAOWFLYLDLFAAUELPATAEGWSOLALPBAVYGUYTHNLFGMAYMWSGBYZOIYHTRDCFBANBFPBNDSPRJPNSDLGLBYIMJELTCNLNWZJLSEAEAELARTAXAAAACSLDAHTAADDYOEADLECSDWYKCSFNYKAEYKAEWKADWKAOCYTIZSYLCNSSDKGOCA
```

### EIP‑1559 交易（高级）

```ts
import { KeystoneEthereumSDK } from '@keystonehq/keystone-sdk';

const eth = new KeystoneEthereumSDK();
const ur = eth.generateSignRequest({
  requestId,                // uuid 字符串
  signData: unsignedTxHex,  // 不带 0x 的十六进制
  dataType: 4,              // typedTransaction
  path: "m/44'/60'/0'/0/0",
  xfp: '12345678',
  chainId: 1,
  origin: 'your-app',
});
// 将 UR 编码为动态 QR 帧并显示
```

### Legacy 交易（高级）

```ts
const ur = eth.generateSignRequest({
  requestId,
  signData: unsignedLegacyHex,
  dataType: 1,              // transaction
  path: "m/44'/60'/0'/0/0",
  xfp: '12345678',
  chainId: 1,
  origin: 'your-app',
});
```

### EIP‑712 TypedData（高级）

```ts
const dataHex = Buffer.from(typedDataJson, 'utf8').toString('hex');
const ur = eth.generateSignRequest({
  requestId,
  signData: dataHex,
  dataType: 2,              // typedData
  path: "m/44'/60'/0'/0/0",
  xfp: '12345678',
  origin: 'your-app',
});
```

### 消息签名（高级）

```ts
const dataHex = Buffer.from(message, 'utf8').toString('hex');
const ur = eth.generateSignRequest({
  requestId,
  signData: dataHex,
  dataType: 3,              // personalMessage
  path: "m/44'/60'/0'/0/0",
  xfp: '12345678',
  origin: 'your-app',
});
```



获取签名需要查看。


[ethsignature.md](ethsignature)

